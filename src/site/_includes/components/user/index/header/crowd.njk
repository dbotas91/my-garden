<div id="crowd-graph">
  <div class="crowd-body">
    {# Compute split index #}
    {% set total = userComputed.crowd.people | length %}
    {% set split = (total // 2) | int %}

    <div class="crowd-page crowd-left">
      {% for row in userComputed.crowd.people | slice(0, split) %}
      <div class="crowd-row">
        {% for people in row %}
          {% if people[0] == 0 %}
            <span class="people plane">
              <span></span>
            </span>
          {% else %}
            <a class="people" href="{{ people[1] }}" title="{{ people[2] }}">
              <img src="/img/{{ people[0] }}.svg" alt="{{ people[2] | default('') }}" style="width: auto; height: {{ 5 + (10 * people[3]) }}px;" />
            </a>
          {% endif %}
        {% endfor %}
      </div>
      {% endfor %}
    </div>

    <div class="crowd-page crowd-right">
      {% for row in userComputed.crowd.people | slice(split, total - split) %}
      <div class="crowd-row">
        {% for people in row %}
          {% if people[0] == 0 %}
            <span class="people plane">
              <span></span>
            </span>
          {% else %}
            <a class="people" href="{{ people[1] }}" title="{{ people[2] }}">
              <img src="/img/{{ people[0] }}.svg" alt="{{ people[2] | default('') }}" style="width: auto; height: {{ 5 + (10 * people[3]) }}px;" />
            </a>
          {% endif %}
        {% endfor %}
      </div>
      {% endfor %}
    </div>
  </div>

  <div class="crowd-legends">
    {% for count in userComputed.crowd.legends %}
      <div class="stat">
        <img src="/img/{{ count.icon }}.svg" alt="{{ count.label }}" />
        {{ count.count }}
        {% if count.count > 1 %}
          {% if count.plural %}
            {{ count.plural }}
          {% else %}
            {{ count.label }}s
          {% endif %}
        {% else %}
          {{ count.label }}
        {% endif %}
      </div>
    {% endfor %}
  </div>
</div>
